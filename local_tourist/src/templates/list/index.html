{% block header %}
<link rel="stylesheet" href="{{ url_for('static', filename='main.css') }}">
<nav class='top-bar'>
  <img id="logo" src="{{ url_for('static', filename='logo.png') }}">
  <img id="wordmark" src="{{ url_for('static', filename='wordmark.png') }}">
  <div class='top-buttons'>
    {% if g.user %}
    <li><span>{{ g.user }}</span>
    <li><a href="{{ url_for('auth.logout') }}">Log Out</a>
    <li><a href="{{ url_for('list.plan', user_id=g.user) }}">My Plan</a>
    <li><a href="{{ url_for('list.rank', user_id=g.user) }}">My Rankings</a>
    <li><a href="{{ url_for('list.index', user_id=g.user) }}">Home</a>
      {% else %}
      <button type="button" class="top-bar-button b-log-in"
        onclick=window.location.href="{{ url_for('auth.login') }}">Sign In</button>
      <button type="button" class="top-bar-button b-register"
        onclick=window.location.href="{{ url_for('auth.register') }}">Sign Up</button>
      {% endif %}
  </div>
</nav>
<div class="wrapper">
  <header class="video-container">
    <video autoplay muted loop>
      <source src="{{ url_for('static', filename='boston.mp4') }}" type="video/mp4" />
    </video>
    <div class="caption">
      <h2>Travel like a local.</h2>
      <div class="desc">This project is still in development. For the most up-to-date documentation and code check the
        <a href="https://github.com/josh-segal/Local-Tourist">GitHub repository</a>.
          Explore attractions by registering a new account or optionally using the demo login "test" with password "test".
        </a></div>
      <button type="button" class="top-bar-button b-learn-more"
        onclick=window.location.href="{{ url_for('auth.register') }}">Learn More</button>
    </div>
  </header>
  <section class="rest">
    {% for message in get_flashed_messages() %}
    <div class="flash">{{ message }}</div>
    {% endfor %}
    {% if g.user %}

    <h1>{% block title %}List of Attractions{% endblock %}</h1>

    {% endif %}
    {% endblock %}
    {% block content %}
    {% if not g.user %}
    <div class="icon-wrapper">
      <div class='icon-div'>
        <img class='front-icon' src="{{ url_for('static', filename='icon1.png') }}">
        <h1>Search Attractions</h1>
        <p>Find attractions based on geographical location.</p>
      </div>
      <div class='icon-div'>
        <img class='front-icon' src="{{ url_for('static', filename='icon2.png') }}">
        <h1>Add to Plan</h1>
        <p>Add attractions to your travel plan for easy access and organization.</p>
      </div>
      <div class='icon-div'>
        <img class='front-icon' src="{{ url_for('static', filename='icon3.png') }}">
        <h1>Optimize Your Trip</h1>
        <p>Generate the most efficient routes between attractions in your plan for a seamless travel experience.</p>
      </div>
      <div class='icon-div'>
        <img class='front-icon'src="{{ url_for('static', filename='icon4.png') }}">
        <h1>Rank Attractions</h1>
        <p>Rate attractions based on your personal experiences.</p>
      </div>
    </div>
    {% endif %}
    {% if g.user %}
    <p>Choose a location to explore:</p>
    <form method="post" action="{{ url_for('list.change_location', location='Boston') }}">
      <button type="submit" class="action">Boston, MA</button>
    </form>
    <form method="post" action="{{ url_for('list.change_location', location='Leuven') }}">
      <button type="submit" class="action">Leuven, Belgium</button>
    </form>
    {% for attraction in attractions %}
    <article class="attraction">
      <header>
        <div>
          <h1>{{ attraction['name'] }}</h1>
          <div class="description">
            location: {{ attraction['vicinity'] }} <br>
          </div>
        </div>
        <form method="post"
          action="{{ url_for('list.add_to_trip', user_id=g.user, attraction_id=attraction['place_id'], name=attraction['name'], location=attraction['vicinity']|replace('/', ''), lat=attraction['geometry']['location']['lat'], lng=attraction['geometry']['location']['lng']) }}">
          <button type="submit" class="action">Add to plan</button>
        </form>
        <form method="post"
          action="{{ url_for('list.add_to_rank', user_id=g.user, attraction_id=attraction['place_id'], name=attraction['name'], location=attraction['vicinity']|replace('/', ''), lat=attraction['geometry']['location']['lat'], lng=attraction['geometry']['location']['lng']) }}">
          <button type="submit" class="action">Rank item</button>
        </form>

      </header>
      <p class="body"> </p>
    </article>
    {% if not loop.last %}
    <hr>
    {% endif %}
    {% endfor %}
    {% endif %}
  </section>
</div>
{% endblock %}